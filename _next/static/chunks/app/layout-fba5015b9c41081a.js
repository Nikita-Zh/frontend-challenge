(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{654:(e,t,a)=>{Promise.resolve().then(a.t.bind(a,7970,23)),Promise.resolve().then(a.t.bind(a,6360,23)),Promise.resolve().then(a.t.bind(a,347,23)),Promise.resolve().then(a.t.bind(a,2775,23)),Promise.resolve().then(a.bind(a,6751)),Promise.resolve().then(a.bind(a,4292)),Promise.resolve().then(a.t.bind(a,445,23)),Promise.resolve().then(a.t.bind(a,9091,23)),Promise.resolve().then(a.bind(a,9596))},4292:(e,t,a)=>{"use strict";a.d(t,{CatGalleryLiked:()=>o});var r=a(5155),s=a(957),i=a.n(s),n=a(492),l=a(2436);let o=()=>{let{likedCats:e,handleLikeCat:t}=(0,l.L)();return(0,r.jsx)("div",{className:i().container,children:e.map((a,s)=>{var i;return(0,r.jsx)(n.p,{onLike:e=>t(e,a),url:a.url,alt:(null===(i=a.breeds[0])||void 0===i?void 0:i.alt_names)||"",isLiked:e.some(e=>e.id===a.id)},"".concat(a.id,"-").concat(s))})})}},6751:(e,t,a)=>{"use strict";a.d(t,{CatGallery:()=>d});var r=a(5155),s=a(2115),i=a(492),n=a(2436);let l=()=>{let[e,t]=(0,s.useState)(!1),[a,r]=(0,s.useState)(!1);return{isLoading:e,isError:a,fetchData:async e=>{let{limit:a=30}=e;return t(!0),r(!1),fetch("".concat("https://api.thecatapi.com/v1/images/search","?limit=").concat(a),{method:"GET",headers:{"x-api-key":"live_BmvfUjq9Id8ESpZtnXQi2BFlUTfxqDq4J3JAfXCqYgL70qg3LFVdX5B7aKjUMP0x"}}).then(e=>e.ok?e.json():Promise.reject).then(e=>e).catch(e=>(console.error(e),r(!0),[])).finally(()=>{t(!1)})}}};var o=a(2895),c=a.n(o);let d=()=>{let[e,t]=(0,s.useState)([]),{fetchData:a,isError:o,isLoading:d}=l(),{likedCats:_,handleLikeCat:m}=(0,n.L)(),u=(0,s.useCallback)(()=>{a({}).then(e=>{t(t=>[...t,...e])})},[a]);return(0,n.X)({selector:".".concat(c().container,">div:last-child"),onFetch:u,isLoading:d}),(0,s.useEffect)(()=>{u()},[]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:c().container,children:e.map((e,t)=>{var a;return(0,r.jsx)(i.p,{onLike:t=>m(t,e),url:e.url,alt:(null===(a=e.breeds[0])||void 0===a?void 0:a.alt_names)||" ",isLiked:_.some(t=>t.id===e.id)},"".concat(e.id,"-").concat(t))})}),d&&(0,r.jsx)("div",{className:c().message,children:"... загружаем еще котиков ..."}),o&&!d&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("p",{children:"Не смогли загрузить котиков, попробовать снова:"}),(0,r.jsx)("button",{onClick:u,children:"Загрузить котиков"})]})]})}},492:(e,t,a)=>{"use strict";a.d(t,{p:()=>l});var r=a(5155),s=a(5565),i=a(445),n=a.n(i);let l=e=>{let{url:t,alt:a,isLiked:i,onLike:l}=e;return(0,r.jsxs)("div",{className:n().image,children:[(0,r.jsx)(s.default,{src:t,fill:!0,sizes:"100%",alt:a,style:{objectFit:"cover",background:"#999"},quality:50}),(0,r.jsx)("button",{className:"".concat(n().like_button," ").concat(i?n()["is-liked"]:""," "),onClick:l})]})}},9596:(e,t,a)=>{"use strict";a.r(t),a.d(t,{NavLink:()=>c});var r=a(5155),s=a(8173),i=a.n(s),n=a(6046),l=a(9005),o=a.n(l);let c=e=>{let{href:t,children:a,className:s,...l}=e,c=(0,n.usePathname)();return(0,r.jsx)(i(),{href:t,className:"".concat(null!=s?s:""," ").concat(c===t?o().active:""),...l,children:a})}},2436:(e,t,a)=>{"use strict";a.d(t,{X:()=>n,L:()=>i});var r=a(2115);let s="likedCats",i=()=>{let[e,t]=(0,r.useState)([]);return(0,r.useEffect)(()=>{t(()=>{let e=localStorage.getItem(s);return e?JSON.parse(e):[]})},[]),{likedCats:e,handleLikeCat:(a,r)=>{if(e.some(e=>e.id===r.id)){let a=e.filter(e=>e.id!==r.id);t(a),localStorage.setItem(s,JSON.stringify(a))}else{let a=[...e,r];t(a),localStorage.setItem(s,JSON.stringify(a))}}}},n=e=>{let{selector:t,isLoading:a,onFetch:s}=e;(0,r.useEffect)(()=>{let e=document.querySelector(t);if(e){let t=new IntersectionObserver(e=>{e[0].isIntersecting&&!a&&s()},{rootMargin:"0px",threshold:.5});return t.observe(e),()=>{t.unobserve(e)}}},[t,a,s])}},347:()=>{},2775:e=>{e.exports={page:"layout_page__ZPT7X",main:"layout_main__mXTwS"}},957:e=>{e.exports={container:"CatGalleryLiked_container__itbsx"}},2895:e=>{e.exports={container:"CatGallery_container__pB7AZ",message:"CatGallery_message__KxxXP"}},445:e=>{e.exports={image:"ImageItem_image__AtuF0",like_button:"ImageItem_like_button__SFa2s","is-liked":"ImageItem_is-liked__6cZ7o"}},9005:e=>{e.exports={active:"NavLink_active__numEi"}},9091:e=>{e.exports={wrapper:"Navbar_wrapper__QU_zm",navbar:"Navbar_navbar__UMdIx",links:"Navbar_links__rYM_3",link:"Navbar_link__ZPZJD"}},6360:e=>{e.exports={style:{fontFamily:"'Roboto', 'Roboto Fallback'",fontWeight:400,fontStyle:"normal"},className:"__className_714081",variable:"__variable_714081"}}},e=>{var t=t=>e(e.s=t);e.O(0,[479,594,992,441,517,358],()=>t(654)),_N_E=e.O()}]);