(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[484,974],{6892:(e,t,a)=>{Promise.resolve().then(a.t.bind(a,7970,23)),Promise.resolve().then(a.bind(a,6751)),Promise.resolve().then(a.bind(a,4292)),Promise.resolve().then(a.bind(a,9596))},4292:(e,t,a)=>{"use strict";a.d(t,{CatGalleryLiked:()=>c});var s=a(5155),r=a(957),i=a.n(r),n=a(492),l=a(2436);let c=()=>{let{likedCats:e,handleLikeCat:t}=(0,l.L)();return(0,s.jsx)("div",{className:i().container,children:e.map((a,r)=>{var i;return(0,s.jsx)(n.p,{onLike:e=>t(e,a),url:a.url,alt:(null===(i=a.breeds[0])||void 0===i?void 0:i.alt_names)||"",isLiked:e.some(e=>e.id===a.id)},"".concat(a.id,"-").concat(r))})})}},6751:(e,t,a)=>{"use strict";a.d(t,{CatGallery:()=>d});var s=a(5155),r=a(2115),i=a(492),n=a(2436);let l=()=>{let[e,t]=(0,r.useState)(!1),[a,s]=(0,r.useState)(!1);return{isLoading:e,isError:a,fetchData:async e=>{let{limit:a=30}=e;return t(!0),s(!1),fetch("".concat("https://api.thecatapi.com/v1/images/search","?limit=").concat(a),{method:"GET",headers:{"x-api-key":"live_BmvfUjq9Id8ESpZtnXQi2BFlUTfxqDq4J3JAfXCqYgL70qg3LFVdX5B7aKjUMP0x"}}).then(e=>e.ok?e.json():Promise.reject).then(e=>e).catch(e=>(console.error(e),s(!0),[])).finally(()=>{t(!1)})}}};var c=a(2895),o=a.n(c);let d=()=>{let[e,t]=(0,r.useState)([]),{fetchData:a,isError:c,isLoading:d}=l(),{likedCats:u,handleLikeCat:m}=(0,n.L)(),h=(0,r.useCallback)(()=>{a({}).then(e=>{t(t=>[...t,...e])})},[a]);return(0,n.X)({selector:".".concat(o().container,">div:last-child"),onFetch:h,isLoading:d}),(0,r.useEffect)(()=>{h()},[]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:o().container,children:e.map((e,t)=>{var a;return(0,s.jsx)(i.p,{onLike:t=>m(t,e),url:e.url,alt:(null===(a=e.breeds[0])||void 0===a?void 0:a.alt_names)||" ",isLiked:u.some(t=>t.id===e.id)},"".concat(e.id,"-").concat(t))})}),d&&(0,s.jsx)("div",{className:o().message,children:"... загружаем еще котиков ..."}),c&&!d&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("p",{children:"Не смогли загрузить котиков, попробовать снова:"}),(0,s.jsx)("button",{onClick:h,children:"Загрузить котиков"})]})]})}},492:(e,t,a)=>{"use strict";a.d(t,{p:()=>l});var s=a(5155),r=a(5565),i=a(445),n=a.n(i);let l=e=>{let{url:t,alt:a,isLiked:i,onLike:l}=e;return(0,s.jsxs)("div",{className:n().image,children:[(0,s.jsx)(r.default,{src:t,fill:!0,sizes:"100%",alt:a,style:{objectFit:"cover",background:"#999"},quality:50}),(0,s.jsx)("button",{className:"".concat(n().like_button," ").concat(i?n()["is-liked"]:""," "),onClick:l})]})}},9596:(e,t,a)=>{"use strict";a.r(t),a.d(t,{NavLink:()=>o});var s=a(5155),r=a(8173),i=a.n(r),n=a(6046),l=a(9005),c=a.n(l);let o=e=>{let{href:t,children:a,className:r,...l}=e,o=(0,n.usePathname)();return(0,s.jsx)(i(),{href:t,className:"".concat(null!=r?r:""," ").concat(o===t?c().active:""),...l,children:a})}},2436:(e,t,a)=>{"use strict";a.d(t,{X:()=>n,L:()=>i});var s=a(2115);let r="likedCats",i=()=>{let[e,t]=(0,s.useState)([]);return(0,s.useEffect)(()=>{t(()=>{let e=localStorage.getItem(r);return e?JSON.parse(e):[]})},[]),{likedCats:e,handleLikeCat:(a,s)=>{if(e.some(e=>e.id===s.id)){let a=e.filter(e=>e.id!==s.id);t(a),localStorage.setItem(r,JSON.stringify(a))}else{let a=[...e,s];t(a),localStorage.setItem(r,JSON.stringify(a))}}}},n=e=>{let{selector:t,isLoading:a,onFetch:r}=e;(0,s.useEffect)(()=>{let e=document.querySelector(t);if(e){let t=new IntersectionObserver(e=>{e[0].isIntersecting&&!a&&r()},{rootMargin:"0px",threshold:.5});return t.observe(e),()=>{t.unobserve(e)}}},[t,a,r])}},957:e=>{e.exports={container:"CatGalleryLiked_container__itbsx"}},2895:e=>{e.exports={container:"CatGallery_container__pB7AZ",message:"CatGallery_message__KxxXP"}},445:e=>{e.exports={image:"ImageItem_image__AtuF0",like_button:"ImageItem_like_button__SFa2s","is-liked":"ImageItem_is-liked__6cZ7o"}},9005:e=>{e.exports={active:"NavLink_active__numEi"}}},e=>{var t=t=>e(e.s=t);e.O(0,[594,992,441,517,358],()=>t(6892)),_N_E=e.O()}]);